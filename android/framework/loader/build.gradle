//apply plugin: 'foundation-module'
apply from: "${rootDir}/script/foundation_module.gradle"
android {
    defaultConfig {
        buildConfigField('String', 'BUGLY_APP_ID', '"3d62251014"')
        buildConfigField('String', 'BUGLY_APP_KEY', '"a15ecf84-1786-40c6-abf5-fe975fce22e6"')
        buildConfigField('String', 'XIAOMI_APP_ID', '"2882303761517994447"')
        buildConfigField('String', 'XIAOMI_APP_KEY', '"5921799441447"')
        buildConfigField('String', 'AMAP_KEY', '"84198333a8ab4404cd35829dbb4ec435"')
        manifestPlaceholders = [
                'BUGLY_APP_ID': '3d62251014', 'BUGLY_APP_KEY': 'a15ecf84-1786-40c6-abf5-fe975fce22e6', "BUGLY_APP_VERSION": "${rootProject.ext.versionName}",
                'AMAP_KEY'    : '84198333a8ab4404cd35829dbb4ec435',
        ]
        buildTypes {
            release {
                manifestPlaceholders = ['QQ_KEY': 'adf', 'WEXIN_KEY': 'adfaf', 'BUGLY_ENABLE_DEBUG': 'false']
            }
            debug {
                manifestPlaceholders = [
                        'QQ_KEY'            : 'adf', 'WEXIN_KEY': 'adfaf',
                        'BUGLY_ENABLE_DEBUG': 'true'
                ]
            }
        }
    }
}
dependencies {
//    api 'com.google.firebase:firebase-analytics'
//    api 'com.google.firebase:firebase-crashlytics'
//    api 'com.google.firebase:firebase-crashlytics-ndk'
    //crash and anr
    api 'com.tencent.bugly:nativecrashreport:3.7.1'
    api 'com.tencent.bugly:crashreport:3.0.0'
    //android 21+可以不接入该sdk，android sdk默认集成
    api 'androidx.multidex:multidex:2.0.1'
//    implementation 'com.google.android.gms:play-services-location:16.0.0'
//    implementation 'com.google.android.gms:play-services-fitness:16.0.1'
    api 'io.github.jamesfchen:lifecycle-api:1.0.2'
    implementation "androidx.startup:startup-runtime:1.0.0"
    api 'com.alibaba:arouter-api:1.3.2'

    api 'com.firebaseui:firebase-ui-database:6.0.2'
    api 'com.firebaseui:firebase-ui-firestore:6.0.2'
    api('com.firebaseui:firebase-ui-storage:6.0.2'){
        exclude group: 'com.github.bumptech.glide',module:'glide'
    }


    api 'androidx.emoji:emoji:1.1.0'
    api 'androidx.emoji:emoji-appcompat:1.1.0'
    api 'androidx.emoji:emoji-bundled:1.1.0'
    api "androidx.work:work-runtime:2.5.0"
    api "androidx.work:work-runtime-ktx:2.5.0"
//    api "androidx.work:work-rxjava2:2.5.0"
    api "androidx.work:work-gcm:2.5.0"
    androidTestImplementation "androidx.work:work-testing:2.5.0"
//    api "androidx.work:work-firebase:2.2.0"
    api 'androidx.navigation:navigation-fragment:2.3.5'
    api 'androidx.navigation:navigation-ui:2.3.5'
    api 'androidx.navigation:navigation-common-ktx:2.3.5'
    api 'androidx.navigation:navigation-runtime-ktx:2.3.5'
    api 'androidx.navigation:navigation-fragment-ktx:2.3.5'
    api 'androidx.navigation:navigation-ui-ktx:2.3.5'

    /**
     * ================================apm start=====================================
     */
    def matrixModules = [
            "matrix-commons",
            "matrix-battery-canary",
            "matrix-android-lib",
            "matrix-android-commons",
            "matrix-trace-canary",
//            "matrix-resource-canary-android",
//            "matrix-resource-canary-common",
            "matrix-io-canary",
            "matrix-sqlite-lint-android-sdk",
            "matrix-hooks",
            "matrix-fd",
            "matrix-jectl",
            "matrix-backtrace",
    ]

    matrixModules.each { moduleName ->
        api group: "com.tencent.matrix", name: moduleName, version: MATRIX_VERSION, changing: true
    }

    // releaseImplementation group: "com.tencent.matrix", name: "matrix-sqlite-lint-android-sdk-no-op", version: MATRIX_VERSION, changing: true

    api("cn.hikyson.godeye:godeye-core:3.0.0")
    api "cn.hikyson.godeye:godeye-toolbox:3.0.0"
    releaseApi("cn.hikyson.godeye:godeye-monitor-no-op:2.7.4")
    debugApi("cn.hikyson.godeye:godeye-monitor:3.0.0")

    //memory leak
//    debugApi 'com.squareup.leakcanary:leakcanary-android:2.2'
//    releaseApi "com.squareup.leakcanary:leakcanary-android-no-op:1.6.3"
//    debugApi "com.squareup.leakcanary:leakcanary-support-fragment:1.6.3"
    api 'com.github.markzhai:blockcanary-android:1.5.0'
    /**
     * ================================apm end=====================================
     */
    kapt 'com.github.bumptech.glide:compiler:4.11.0'
//    annotationProcessor 'com.github.bumptech.glide:compiler:4.11.0'
    //optional, help to generate the final application
    annotationProcessor('com.tencent.tinker:tinker-android-anno:1.9.1')
    //tinker's main Android lib
    implementation('com.tencent.tinker:tinker-android-lib:1.9.1')
}
apply from : "${rootDir}/script/module_publisher.gradle"
publish {
    name = "framework-loader"
    groupId = gradle.groupId
    artifactId = "framework-loader"
    version = "1.0.0-SNAPSHOT"
    website = "https://github.com/JamesfChen/spacecrafe-android"
    buildVariant = "debug"
}