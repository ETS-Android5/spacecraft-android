import groovy.json.JsonSlurper

include ':app'
//apply from: "./buildSrc/src/main/groovy/module-config.groovy"
//apply from: "./buildSrc/src/main/groovy/module-config.gradle"

/**
 * 读取module_config.json信息include具体的模块
 * 依赖包的来源有模块的源码编译、模块的aar文件，bundle依赖的framework包必须参与编译，某个业务的bundle可以选择不参与编译。
 */
def config = new JsonSlurper().parse(file("./buildSrc/module_config.json"))
gradle.ext.allModules = config.allModules

//include ':components:hotel-module:foundation'
//include ':components:hotel-module:hotel-lint'
//include ':components:hotel-module:bundle1'
//include ':components:hotel-module:bundle2'
//include ':components:myhome',
//        ':components:login'
//include ':components:template'
//include ':components:module1'
println "[gradle settings] begin ========================================================================================"
gradle.ext.allModules.each{ module->
    println "[gradle settings] include:${module.module}"
    include module.module
    if(module.path){
        project(module.module).projectDir = new File(rootProject.projectDir,module.path)
    }

}
println "[gradle settings] end ========================================================================================"
include ':mockserver'
include ':framework:common', ':framework:loader',':framework:router',
        ':framework:network', ':framework:storage', ':framework:image',
        ':framework:av', ':framework:map', ':framework:chatroom',
        ':framework:uicomponent'

setBinding(new Binding([gradle: this]))
evaluate(new File(settingsDir, 'script/flutter/include_flutter.gradle'))
//include ':gradle-plugin'
include ':lint-rules'
include ':lint-checker'
include ':instrumentation:annotations', ':instrumentation:processor'

